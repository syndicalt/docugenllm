<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script_client">
    <sys_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_extended>false</applies_extended>
        <condition/>
        <description>Hides project-related fields if the Project Management and/or Agile Developement applications are not installed.</description>
        <field/>
        <global>true</global>
        <isolate_script>false</isolate_script>
        <messages/>
        <name>Form Control - Hide Fields App Missing</name>
        <order/>
        <script><![CDATA[function onLoad() {
	try {
		var checkTables = [
			'pm_project', 
			'rm_story'
		];

		checkTables.forEach(function(table) {
			var clientUtil = new GlideAjax('ClientActionsHandler');
			clientUtil.addParam('sysparm_name', 'checkAppInstalled');
			clientUtil.addParam('sysparm_tableName', table);
			clientUtil.getXML(function(response){
				var answer = response.responseXML.documentElement.getAttribute("answer");
				var fieldObj = {
					"pm_project": {
						"fieldName": "u_projects",
						"textRef": "Projects",
						"appName": "Project Management"
					},
					"rm_story": {
						"fieldName": "u_stories",
						"textRef": "Story(s)",
						"appName": "Agile Development"
					}
				}
				
				if(!answer) {
					g_form.setReadOnly(fieldObj[table].fieldName, true);
					g_form.setDisplay(fieldObj[table].fieldName, false);

					g_form.addInfoMessage('The ' + fieldObj[table].textRef + ' reference list has been removed because the ' + fieldObj[table].appName + ' application is not installed.');
				}
			});
		});
	} catch(e) {
		g_form.addErrorMessage(`[Form Control - Hide Fields App Missing] Error: ${ e.message }`);
	}
}]]></script>
        <sys_class_name>sys_script_client</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-09-13 22:47:24</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>dfe696d48340361046cfe4d0deaad322</sys_id>
        <sys_mod_count>18</sys_mod_count>
        <sys_name>Form Control - Hide Fields App Missing</sys_name>
        <sys_overrides/>
        <sys_package display_value="DocuGenLLM" source="54a6cf7783b7621046cfe4d0deaad30f">54a6cf7783b7621046cfe4d0deaad30f</sys_package>
        <sys_policy/>
        <sys_scope display_value="DocuGenLLM">54a6cf7783b7621046cfe4d0deaad30f</sys_scope>
        <sys_update_name>sys_script_client_dfe696d48340361046cfe4d0deaad322</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-09-13 23:16:10</sys_updated_on>
        <table>u_docugen_code_docs</table>
        <type>onLoad</type>
        <ui_type>10</ui_type>
        <view/>
    </sys_script_client>
</record_update>
